(()=>{var Fe=Object.defineProperty;var Pe=(t,e,r)=>e in t?Fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ht=(t,e,r)=>(Pe(t,typeof e!="symbol"?e+"":e,r),r);var b=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),h=t=>typeof t=="function",B=t=>Array.isArray(t),_=t=>typeof t=="string";var O=t=>t===void 0,$=t=>t instanceof Element;var ut=(t,e)=>JSON.stringify(t)===JSON.stringify(e);function w(t,e={},...r){qt("Warning",t,e,...r)}function c(t,e={}){let r=typeof t=="string"?t:t.message||"Unknown error",o={message:r,...e};setTimeout(()=>qt("Error",r,o),0)}function ft(t,e={},...r){let{el:o,expression:n,message:i="",defaultValue:s=null,rethrow:a=!1,onError:l}=e;try{return t(...r)}catch(f){let d=`${i}
${f.message}`;if(c(d,{el:o,expression:n}),l&&h(l)&&l(f,{el:o,expression:n,message:i}),a)throw f;return s}}function qt(t,e,r={},...o){let{el:n,expression:i,component:s}=r,a=new Date().toISOString(),l={message:e,el:n,expression:i,component:s,timestamp:a,additionalInfo:o},f=t.toLowerCase(),d=console[f]||console.log;console.groupCollapsed(`%c[Asor ${t}]: ${e}`,`color: ${f==="error"?"#FF0000":"#FFA500"}; font-weight: bold;`),d(e),s&&d(`Component: ${s}`),i&&d(`Expression: "${i}"`),n&&$(n)&&d("Element:",n),d("Timestamp:",a),o.length>0&&(console.groupCollapsed("Additional Info"),o.forEach((E,A)=>d(`Argument ${A+1}:`,E)),console.groupEnd()),console.groupCollapsed(`${t} Details`),d(l),console.groupEnd(),console.groupCollapsed("Stack Trace"),console.trace(),console.groupEnd(),console.groupEnd()}var dt=new Map,y=(t,e,r,o={})=>{let n=dt.get(e);n||(n=new Set,dt.set(e,n)),n.add(r);let i=new AbortController;return t.addEventListener(e,r,{...o,signal:i.signal}),()=>{i.abort(),n.delete(r),n.size===0&&dt.delete(e)}},m=(t,e,r,o={})=>{let n=new CustomEvent(e,{bubbles:!0,cancelable:!0,...o,detail:r});return n.__asor={name:e,detail:r,receivedBy:[]},t.dispatchEvent(n)},kt=(t,e)=>y(window,t,r=>r.__asor&&e(r)),Ut=(t,e)=>m(window,t,e),Vt=(t,e,r)=>m(t,e,r,{bubbles:!1});var Wt=(t,e)=>{for(;t&&t!==document.body;){if(e(t))return t;t=t.parentElement}return null},jt=t=>document.querySelector(`meta[name='${t}']`)?.getAttribute("content")||"";var zt=t=>Wt(t,e=>e.hasAttribute("a-def"))||document.body,Bt=t=>Wt(t,e=>e.dataset&&Object.keys(e.dataset).length>0||e.hasAttribute("a-def"))||document.body;var mt=t=>t.tagName==="FORM";var Xt=(t,e)=>window.getComputedStyle(t).getPropertyValue(e);var Kt=(t=36)=>Math.random().toString(t).substring(2,10);function C(t=document.body,e=["a-","@",":"]){let r=[],o=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>Array.from(i.attributes).some(s=>e.some(a=>s.name.startsWith(a)))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),n;for(;n=o.nextNode();)r.push(n);return r}var L=new WeakMap,D="data-a-",Jt=t=>Array.from(t.attributes).find(e=>e.name.startsWith(D))?.name||null,T=(t,e)=>$(t)?b(e)?(ut(L.get(t),e)||(L.set(t,e),t.__asor_def=e,Gt(t)),e):(c(`${e} must be a valid object`,t),null):(c("The element is not a valid HTML element",t),null);function g(t){for(;t;){if(t.__asor_def)return t.__asor_def;t=t.parentElement}return{}}var X=t=>{L.delete(t);let e=Jt(t);e&&t.removeAttribute(e),delete t.__asor_def};function I(t){try{if(!L.get(t))return;Gt(t)}catch(e){c("Error updating data for element",t,e)}}function Yt(t){try{let e=L.get(t),r=t.__asor_def;He(e,r)&&L.set(t,{...r})}catch(e){c("Error updating data for element",t,e)}}var He=(t,e)=>!ut(t,e);function Gt(t){try{(()=>{let r=Kt(),o=Jt(t);o&&t.removeAttribute(o),t.setAttribute(`${D}${r}`,"")})()}catch(e){c("Error serializing data for element",t,e)}}var Qt=new WeakMap,te=new Map,qe=(()=>{let t=new Map;return e=>{let r=e.join("|");return t.get(r)||t.set(r,new RegExp(`^(?:${r})([^\\s.:]+)(?:\\.[^\\s.:]+)*(?::[^\\s]+)?\\s*`)).get(r)}})(),ke=t=>{if(!t)throw new Error("Directive name is required");return t.startsWith(":")?`a-bind:${t.slice(1)}`:t.startsWith("@")?`a-on:${t.slice(1)}`:t.startsWith("a-")?t:`a-${t}`},u=(t,e)=>te.set(t,e),ee=()=>C().forEach(J);function J(t){if(!t)return c(`Undefined element: ${t}`);let e=K(t);e.directives.sort((r,o)=>Zt.get(r.name)-Zt.get(o.name)).forEach(r=>{let o=te.get(r.name);o&&o({el:t,directive:r,manager:e})})}var re=t=>Array.from(t.attributes).some(e=>e.name.startsWith(":")||e.name.startsWith("@")||e.name.startsWith("a-")),K=t=>{let e=Qt.get(t);if(!e){let r=Ve(t);e={el:t,directives:r,hasDirective:o=>r.some(n=>n.name===o),getDirective:o=>r.find(n=>n.name===o),delDirective:o=>e.directives=e.directives.filter(n=>n.name!==o)},Qt.set(t,e)}return e},Ue=["ref","def","bind","init","confirm","xhr","on","effect","show","navigate","transition","for","if","loading","offline","stream"],Zt=new Map(Ue.map((t,e)=>[t,e])),p=(t,e)=>{let r=K(t).getDirective(e);return r?{...r,name:e}:null},Ve=t=>{if(!t?.attributes)return c("Invalid element in extractDirectives"),[];let e=qe(["a-","@",":"]);return Array.from(t.attributes).filter(r=>e.test(r.name)).map(({name:r,value:o})=>We(t,r,o))},We=(t,e,r)=>{let o=ke(e),{directiveName:n,directiveValue:i}=je(o),s=ze(e);return{el:t,name:n,fullName:o,expression:r,value:i,modifiers:s,hasModifier:a=>s.has(a),getModifierValue:a=>s.get(a),getAllModifiers:()=>Array.from(s,([a,l])=>({name:a,value:l})),hasModifiers:()=>s.size>0,firstModifier:()=>{let[a,l]=s.entries().next().value||[];return a?{name:a,value:l}:null}}},je=t=>{let e=/^a-(?:(on):)?([^:.]+)(?::([^.]+))?/,[,r,o,n]=t.match(e)||[];return{directiveName:r||o,directiveValue:r?o:n}},ze=t=>{let e=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[];return new Map(e.map(r=>{let[o,n]=r.slice(1).split("-");return[o,n===void 0?!0:n]}))};async function oe(t,e){let r=C(t),o=C(e);r.forEach(n=>{let i=o.find(s=>s.isEqualNode(n));if(!i||!Be(n,i))J(n);else{let s=g(i);s&&T(n,s)}})}function Be(t,e){let r=K(t),o=K(e);return r.directives.length!==o.directives.length?!1:r.directives.every((n,i)=>{let s=o.directives[i];return n.name===s.name&&n.expression===s.expression})}var pt=window.requestIdleCallback||function(t){let e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},ao=window.cancelIdleCallback||function(t){clearTimeout(t)};var ne={CHILD_LIST:"childList",ATTRIBUTES:"attributes"},q={elementAdded:new Set,elementRemoved:new Set,attributeChanged:new Set},G=null,k=!1,Q=!1,ht=class{constructor(){this.addedNodes=new Set,this.removedNodes=new Set,this.changedAttributes=new Map}add(e){if(e.type===ne.CHILD_LIST)e.addedNodes.forEach(r=>r.nodeType===Node.ELEMENT_NODE&&this.addedNodes.add(r)),e.removedNodes.forEach(r=>r.nodeType===Node.ELEMENT_NODE&&this.removedNodes.add(r));else if(e.type===ne.ATTRIBUTES&&e.attributeName.startsWith(D)){let r=e.target.getAttribute(e.attributeName);e.oldValue!==r&&this.changedAttributes.set(e.target,{attributeName:e.attributeName,oldValue:e.oldValue,newValue:r})}}process(e){let r=(n,i)=>{for(let s of n){if(e.timeRemaining()<=0&&!e.didTimeout)return!1;i(s),n.delete(s)}return!0},o=()=>{for(let[n,{attributeName:i,oldValue:s,newValue:a}]of this.changedAttributes){if(e.timeRemaining()<=0&&!e.didTimeout)return!1;q.attributeChanged.forEach(l=>Y(l,n,i,s,a)),Y(()=>Yt(n)),this.changedAttributes.delete(n)}return!0};return r(this.addedNodes,n=>q.elementAdded.forEach(i=>Y(i,n)))&&r(this.removedNodes,n=>q.elementRemoved.forEach(i=>Y(i,n)))&&o()}isEmpty(){return this.addedNodes.size===0&&this.removedNodes.size===0&&this.changedAttributes.size===0}},R=new ht,Xe=()=>{if(Q)return;Q=!0;let t=e=>{R.process(e)?Q=!1:pt(t)};pt(t)},Ke=t=>{t.forEach(e=>R.add(e)),R.isEmpty()||Xe()},Y=(t,...e)=>{try{t(...e)}catch(r){c("Error in mutation observer callback:",t.toString(),r)}},gt=()=>{k||!document||(G||(G=new MutationObserver(Ke)),G.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),k=!0)},yt=()=>{k&&(G.disconnect(),k=!1)},xt=t=>e=>{if(h(e))return q[t].add(e),()=>q[t].delete(e);c(`Invalid callback provided to on${t.charAt(0).toUpperCase()+t.slice(1)}`)},po=xt("elementAdded"),Z=xt("elementRemoved"),F=xt("attributeChanged"),v=t=>{let e=k;e&&yt();try{t()}finally{e&&gt()}},ie=()=>{R.addedNodes.clear(),R.removedNodes.clear(),R.changedAttributes.clear(),Q=!1};var P=new WeakMap,vt=new Set,tt=!1;function et(t,e){return P.has(t)||P.set(t,new Set),P.get(t).add(e),()=>{let r=P.get(t);r&&(r.delete(e),r.size===0&&P.delete(t))}}function rt(t){vt.add(t),Je()}function Je(){tt||(tt=!0,queueMicrotask(()=>Ye()),tt=!1)}function Ye(){vt.forEach(t=>{I(t);let e=P.get(t);e&&e.forEach(r=>r())}),vt.clear(),tt=!1}var se="asor_persist_";function ae(t,e){let r=t.uniqueId||se+t,o=localStorage.getItem(r);if(o===null)return e;try{return JSON.parse(o)}catch(n){return w(`Error parsing stored value for key ${t}:`,n),e}}function Et(t,e){let r=t.uniqueId||se+t;try{localStorage.setItem(r,JSON.stringify(e))}catch(o){c(`Error storing value for key ${t}:`,o)}}var U=new WeakMap;function bt(t,e){if((!t||!b(t))&&(t={}),U.has(t))return U.get(t);let r=tr(t,e),o=new Proxy(r,Ge(e));return U.set(t,o),o}function Ge(t){return{get(e,r,o){let n=Reflect.get(e,r,o);return n&&n.__isPersist?n.value:h(n)&&!r.startsWith("__")?Qe(n,t,o):n},set(e,r,o,n){if(Ze(e,r,o,t))return!0;let i=e[r];return Reflect.set(e,r,o,n),i!==o&&rt(t),!0}}}function Qe(t,e,r){return function(...o){let n=t.apply(r,o);return rt(e),n}}function Ze(t,e,r,o){if(t[e]&&t[e].__isPersist){let n=t[e].value;return t[e].value=r,Et(e,r),n!==r&&rt(o),!0}return!1}function tr(t,e){let r={};return er(t,r),rr(t,r,e),r}function er(t,e){Object.keys(t).forEach(r=>{let o=Object.getOwnPropertyDescriptor(t,r);o&&typeof o.get=="function"&&Object.defineProperty(e,r,{get:o.get.bind(e),enumerable:!0,configurable:!0})})}function rr(t,e,r){Object.entries(t).forEach(([o,n])=>{n&&n.__isPersist?e[o]=or(o,n):b(n)?e[o]=bt(n,r):h(n)?e[o]=n:e[o]||(e[o]=n)})}function or(t,e){let r=ae(t,e.initialValue);return r==null&&(r=e.initialValue),Et(t,r),{__isPersist:!0,value:r}}function ce(t){let e=g(t);e&&U.has(e)&&U.delete(e)}var ot=!1;function le(t=!1){if(ot&&!t){w("Asor is already initialized. Skipping re-initialization.");return}wt();let e=()=>{ie(),m(document,"asor:init"),m(document,"asor:initializing"),requestAnimationFrame(()=>{gt(),ee(),ot=!0,m(document,"asor:initialized")})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}function wt(t=null){!ot||(yt(),nr(),window.asor&&delete window.asor,t&&h(t)&&t(),m(document,"asor:stopped"),ot=!1)}function nr(){document.querySelectorAll("*").forEach(t=>{Array.from(t.attributes).filter(r=>r.name.startsWith(D)).forEach(r=>t.removeAttribute(r.name)),ce(t)})}var Dt={parseInt,parseFloat,isNaN,isFinite,encodeURIComponent,decodeURIComponent,encodeURI,decodeURI};function ue(t,e={}){let r=zt(t),o=g(t)||g(r)||{},n=r._asor_refs||{},i={$el:t,$event:e.$event||{},$refs:n,$root:{...r,dataset:r?{...r.dataset}:{}},$dispatch:(s,a)=>m(t,s,a),$persist:s=>({__isPersist:!0,initialValue:s})};return{...i,$data:new Proxy(o,{get(s,a){if(a in s)return s[a];if(a in i)return i[a];if(a in e)return e[a];if(a in Dt)return Dt[a]}}),...Dt,...e}}var V=new Map,ir=500,sr=(t,e)=>({el:t,expression:e,rethrow:!1,defaultValue:null,message:`Error evaluating expression: "${e}"`}),ar=t=>`
    with (__context) {
        with ($data) {
            return (${t});
        }
    }
`,cr=t=>`
    try {
        ${t}
    } catch (e) {
        if (e instanceof ReferenceError) return undefined;
        throw e;
    }
`,lr=t=>{let e=ar(t),r=cr(e);return new Function("__context",r)},ur=(t,e)=>{let r=Object.keys(e).sort().join(",");return`${t}::${r}`},fr=(t,e)=>{if(V.size>=ir){let r=V.keys().next().value;V.delete(r)}V.set(t,e)};function Tt(t,e,r){let o=sr(t,e);if(h(e))return ft(e,o,r);if(!_(e))return c(`Invalid expression type: ${typeof e}. Expected string or function.`,t,e),null;let n=ue(t,r),i=ur(e,n),s=V.get(i);return s||(s=lr(e),fr(i,s)),ft(()=>s(n),o)}var x=(t,e,r={})=>Tt(t,e,r);u("ref",({el:t,directive:e})=>{let r=e.expression?.trim();if(!r)return;let o=s=>{let a=Bt(t);if(a._asor_refs||(a._asor_refs={}),s(a._asor_refs),a!==document.documentElement){let l=g(a)||{};l.$refs=a._asor_refs,T(a,l)}},n=()=>o(s=>s[r]=t),i=()=>o(s=>delete s[r]);return n(),Z(s=>{$(s)&&s===t&&i()})});var fe=(t,e)=>{if(b(t))return t;if(!_(t)||!t.trim())return{};try{let r=Tt(e,`(${t})`,{});if(b(r))return r;c(`Invalid data attribute: ${t}`,e,t)}catch(r){return c(`Error parsing data attribute: ${r.message}`,e,t),{}}};function de(t){let e=t.match(/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/);if(!e)return null;let[,r,o]=e,n=r.replace(/^\(|\)$/g,"").split(",").map(i=>i.trim());return n.length===1?{item:n[0],items:o.trim()}:n.length===2?{item:n[0],key:n[1],items:o.trim()}:n.length===3?{item:n[0],key:n[1],index:n[2],items:o.trim()}:null}u("def",({el:t,directive:e})=>{try{let r=e.expression?.trim();r=r===""?"{}":r;let o=fe(r,t),n=bt(o,t);return T(t,n),I(t),()=>X(t)}catch(r){c("Error in a-def directive:",r,t)}});var dr={text:t=>t.textContent,html:t=>t.innerHTML,value:t=>t.value,checked:t=>t.checked,selected:t=>t.selected,class:t=>t.className},mr=new Map([["text",(t,e)=>t.textContent=e??""],["html",(t,e)=>t.innerHTML=e??""],["value",(t,e)=>{t.value!==e&&(t.value=e??"")}],["checked",(t,e)=>t.checked=!!e],["disabled",(t,e)=>t.disabled=!!e],["readonly",(t,e)=>t.readOnly=!!e],["required",(t,e)=>t.required=!!e],["multiple",(t,e)=>t.multiple=!!e],["hidden",(t,e)=>t.hidden=!!e],["radio",(t,e)=>t.checked=t.value==e],["open",(t,e)=>t.open=!!e],["class",gr],["style",yr],["selected",Er],["multipleSelect",pe],["contenteditable",(t,e)=>{t.innerHTML!==e&&(t.innerHTML=e)}],["number",(t,e)=>{t.value=e==null?"":Number(e)}]]);function me(t,e,r){if(!t)return;if(t.tagName==="SELECT"&&t.multiple&&e==="value"){pe(t,r);return}let o=pr(t,e);Object.is(o,r)||hr(t,e,r)}function pr(t,e){return dr[e]?.(t)??t.getAttribute(e)}function hr(t,e,r){(mr.get(e)||((o,n)=>o.setAttribute(e,n??"")))(t,r)}function gr(t,e){if(_(e))t.className=e;else if(B(e))t.className=e.join(" ");else if(b(e))for(let[r,o]of Object.entries(e))r.includes(" ")?r.split(" ").forEach(n=>{t.classList.toggle(n.trim(),!!o)}):t.classList.toggle(r,!!o)}function yr(t,e){_(e)?t.style.cssText=e:b(e)&&Object.assign(t.style,e)}function xr(t,e,r){let o=vr(t,r),n=t.closest("[a-def]");if(!n)return;let i=g(n);if(i){let s={...i,[e]:o};T(n,s),I(n)}}function vr(t,e){return t.tagName==="SELECT"&&t.multiple?Array.from(t.selectedOptions).map(r=>r.value):t.type==="date"||t.type==="datetime-local"?t.valueAsDate:t.type==="checkbox"?e.target.checked:t.type==="file"?t.multiple?Array.from(t.files):t.files[0]:e.target.value}function Er(t,e){let r=Array.from(t.options);if(B(e))r.forEach(o=>o.selected=e.includes(o.value));else{let o=r.find(n=>n.value==e);o&&(o.selected=!0,t.value=o.value)}}function pe(t,e){B(e)||(e=[e]),Array.from(t.options).forEach(r=>r.selected=e.includes(r.value))}function he(t,e){if(["INPUT","TEXTAREA","SELECT"].includes(t.tagName)){let r=t.type==="checkbox"||t.type==="radio"||t.type==="file"?"change":"input";return y(t,r,o=>xr(t,e,o))}return null}u("bind",({el:t,directive:e})=>{let r=e.value||"text",o=e.expression;if(!o){c("Empty bind expression",null,t);return}let n=async()=>{let s=g(t),a=await x(t,o,{data:s});O(a)||v(async()=>{me(t,r,a),he(t,o)})};n();let i=F((s,a)=>{s.contains(t)&&a.startsWith(D)&&n()});return()=>i});u("init",({el:t,directive:e})=>{let r=e.expression?.trim();if(!r)return;let o=t.__asor_def||g(t);if(!o){c("No data found for a-init directive:",t);return}(async()=>await x(t,r,{data:o,$el:t}))()});u("effect",({el:t,directive:e})=>{let r=e.expression,o=async()=>{let s=t.__asor_def||g(t);if(!s)return;let a=await x(t,r,{data:s});if(h(a))return await a()},n,i=async()=>{n&&(n(),n=null);let s=await o();h(s)&&(n=s)};return i(),et(t,i)});u("confirm",({el:t,directive:e})=>{let r=e.expression,o=e.hasModifier("prompt");r=r.replaceAll("\\n",`
`),r===""&&(r="Are you sure?");let n=(i,s,a)=>{i?s():a()};t.__confirm_action=(i,s)=>{if(o){let[a,l]=r.split("|");l||c("Directives: You must provide an expectation with @confirm.prompt.");let f=prompt(a);n(f===l,i,s)}else n(confirm(r),i,s)}});function ye(t){let e=document.getElementById("asor-error");e||(e=document.createElement("div"),e.id="asor-error",e.style.cssText=`
            position: fixed;
            width: 100vw;
            height: 100vh;
            padding: 50px;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 200000;
        `,e.addEventListener("click",()=>ge(e)),e.tabIndex=0,document.body.prepend(e),document.body.style.overflow="hidden");let r=document.createElement("iframe");r.style.cssText=`
        background-color: #17161A;
        border-radius: 5px;
        width: 100%;
        height: 100%;
    `,e.innerHTML="",e.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.write(t),r.contentWindow.document.close(),e.addEventListener("keydown",o=>{o.key==="Escape"&&ge(e)}),e.focus()}function ge(t){t.outerHTML="",document.body.style.overflow="visible"}function St(t){return new At(t)}var At=class{constructor(e){this.formData=new FormData,this.hasFile=!1,this.errors=[],e.tagName==="FORM"?this.serializeForm(e):this.collectElementData(e),this.addDirectiveData(e)}collectElementData(e){let r=this.elementHandlers[e.tagName];r&&r.call(this,e)}elementHandlers={SELECT:this.handleSelect,TEXTAREA:this.handleTextArea,INPUT:this.handleInput,BUTTON:this.handleButton};handleSelect(e){e.multiple?Array.from(e.selectedOptions).forEach(r=>{this.formData.append(e.name,r.value)}):this.formData.append(e.name,e.value)}handleTextArea(e){this.formData.append(e.name,e.value)}handleInput(e){let r={checkbox:()=>this.formData.append(e.name,e.checked),radio:()=>{e.checked&&this.formData.append(e.name,e.value)},file:()=>{e.files.length>0&&(Array.from(e.files).forEach(o=>{this.formData.append(e.name,o)}),this.hasFile=!0)},date:()=>{let o=new Date(e.value);isNaN(o.getTime())||this.formData.append(e.name,o.toISOString())},number:()=>{let o=parseFloat(e.value);isNaN(o)||this.formData.append(e.name,o)},default:()=>this.formData.append(e.name,e.value)};(r[e.type]||r.default)()}handleButton(e){e.name&&(e.type==="submit"||e.type==="button")&&this.formData.append(e.name,e.value||e.textContent)}addDirectiveData(e){let r=p(e,"data");r&&this.formData.append(r.value,r.expression);let o=p(e,"add");if(o)try{let n=JSON.parse(o.expression);Object.entries(n).forEach(([i,s])=>{this.formData.append(i,s)})}catch(n){c("Error parsing add directive:",n)}}serializeForm(e){this.formData=new FormData(e),this.hasFile=Array.from(this.formData.values()).some(r=>r instanceof File)}toObject(){let e={};for(let[r,o]of this.formData.entries())e[r]?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(o)):e[r]=o;return e}toJSON(){return JSON.stringify(this.toObject())}get(){return this.formData}hasFiles(){return this.hasFile}getErrors(){return this.errors}};function ve(t){return p(t,"swap")?.expression||"innerHTML"}var xe={innerHTML:(t,e)=>{t.innerHTML=e},outerHTML:(t,e)=>{t.outerHTML=e},beforebegin:(t,e)=>{t.insertAdjacentHTML("beforebegin",e)},afterbegin:(t,e)=>{t.insertAdjacentHTML("afterbegin",e)},beforeend:(t,e)=>{t.insertAdjacentHTML("beforeend",e)},afterend:(t,e)=>{t.insertAdjacentHTML("afterend",e)},replace:(t,e)=>{t.replaceWith(..._t(e))},append:(t,e)=>{t.append(..._t(e))},prepend:(t,e)=>{t.prepend(..._t(e))}};function nt(t,e,r){try{v(()=>{(xe[r]||xe.innerHTML)(t,e)})}catch(o){c(`Error applying swap method "${r}":`,o)}}var _t=t=>{let e=document.createElement("div");return e.innerHTML=t,e.childNodes};var W=new WeakMap;function Ee(t){if(W.has(t))return W.get(t);let e=p(t,"target");if(e){let r=e.expression?.trim();if(r){let o=document.querySelector(r);if(o)return W.set(t,o),o;w(`Target element "${r}" not found. Using original element.`)}}return W.set(t,t),t}function be(t){let e=p(t,"target");e?.modifiers.includes("once")&&(t.removeAttribute(e.directive),W.delete(t))}var It=new Set,Nt=!1;async function we(t,e){let o=new DOMParser().parseFromString(e,"text/html"),n=Ee(t),i=ve(n),s=o.body.innerHTML,a=n.cloneNode(!0);Dr(n,()=>{nt(n,s,i),br(a,n),wr(n),be(n)})}function br(t,e){let r=C(t),o=C(e);o.forEach(n=>{let i=r.find(s=>s.isEqualNode(n));if(i){let s=g(i);s&&T(n,s)}}),oe(e,t),r.forEach(n=>{o.some(i=>i.isEqualNode(n))||De(n)})}function De(t){let e=g(t);e&&e.$refs&&Object.keys(e.$refs).forEach(r=>{e.$refs[r]===t&&delete e.$refs[r]}),X(t),Array.from(t.children).forEach(De)}function wr(t){!p(t,"transition")||m(t,"asor:transition",{visible:!0})}function Dr(t,e){It.add({el:t,updateFn:e}),Tr()}function Tr(){Nt||(Nt=!0,requestAnimationFrame(Ar))}function Ar(){v(()=>{for(let{el:t,updateFn:e}of It)e(t);It.clear()}),Nt=!1}var Ct=new Map,Te=()=>new Mt,Mt=class{async handleRequest(e,r,o){let n=this.buildRequestOptions(r,e);m(document,"asor:before-request",{method:r,url:o,options:n});try{let i=await this.fetchData(r,o,n,e);if(!i)return;await this.handleResponse(i,e)}catch(i){this.handlerError(i,e)}finally{m(document,"asor:after-request",{method:r,url:o,options:n})}}buildRequestOptions(e,r){let o={method:e.toUpperCase(),headers:this.buildHeaders(r)};if(["POST","PUT","PATCH"].includes(o.method)){let n=St(r);o.body=this.prepareRequestBody(r,n)}return o}buildHeaders(e){return{Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Current-URL":document.location.href,"X-Asor":"true","Content-Type":this.getContentType(e)}}getContentType(e){let r=St(e);return mt(e)||r.hasFiles()?void 0:p(e,"enctype")?.expression||"application/json"}prepareRequestBody(e,r){return mt(e)||r.hasFiles()?r.get():JSON.stringify(r.toObject())}async fetchData(e,r,o,n){m(document,"asor:before-send",{method:e,url:r,options:o}),m(document,"asor:send",{method:e,url:r,options:o});let i=`${e}:${r}`;if(Ct.has(i))return Ct.get(i);let s=await fetch(r,o);if(!s.ok)return this.handlerError(`HTTP error! status: ${s.status}`,n),!1;let a=await s.text();return Ct.set(i,a),a}async handleResponse(e,r){m(document,"asor:before-render",{response:e});let o=this.getTargetDirective(r);await we(o,e),m(document,"asor:render",{html:e})}getTargetDirective(e){let r=p(e,"target")?.expression;return r?document.querySelector(r):e}handlerError(e,r){c("XHR request failed:",r,e),ye(e.message)}};async function it(t){return p(t,"confirm")?.expression?new Promise(r=>{h(t.__confirm_action)?t.__confirm_action(()=>r(!0),()=>r(!1)):r(!0)}):!0}function Ae(t,e){let r;return function(...o){clearTimeout(r),r=setTimeout(()=>t(...o),e)}}function Se(t,e){let r;return function(...o){r||(t.apply(this,o),r=!0,setTimeout(()=>r=!1,e))}}var Ot={enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,shift:16,ctrl:17,alt:18,meta:91},$t=["shift","ctrl","alt","meta"],Sr=["get","post","put","patch","delete"],j=new WeakMap,_r={form:"submit",select:"change",textarea:"input",button:"click",details:"toggle",audio:"play",video:"play"},Ir={button:"click",submit:"click",reset:"click",checkbox:"change",radio:"change",file:"change",date:"change",time:"change","datetime-local":"change"},Ie=t=>Sr.includes(t.value?.toLowerCase())?t.value.toLowerCase():"get",Ne=t=>{if(!t?.tagName)return w("Invalid element provided to getDefaultEventType"),"click";let e=t.tagName.toLowerCase(),r=(t.type||"").toLowerCase();return e==="input"?Ir[r]||"input":e==="a"?t.href?"click":"mousedown":_r[e]||(t.isContentEditable?"input":t.getAttribute("tabindex")!==null?"focus":"click")},st=(t,e,r={})=>{let{preventDefault:o,stopPropagation:n,once:i,delay:s,throttleTime:a,passive:l,keyModifiers:f,self:d}={preventDefault:!1,stopPropagation:!1,once:!1,delay:0,throttleTime:0,passive:!1,keyModifiers:[],self:!1,...r},E=JSON.stringify({preventDefault:o,stopPropagation:n,once:i,delay:s,throttleTime:a,passive:l,keyModifiers:f,self:d});j.has(t)||j.set(t,new Map);let A=j.get(t);if(!A.has(E)){let Re=async S=>{if(S.type==="intersect")return _e(()=>e(S),s,a);d&&S.target!==t||Mr(S)&&!Or(S,f)||(o&&!l&&h(S.preventDefault)&&S.preventDefault(),n&&h(S.stopPropagation)&&S.stopPropagation(),_e(()=>Cr(t,S,e),s,a),i&&Nr(t,E))};A.set(E,Re)}return A.get(E)},_e=(t,e,r)=>e>0?Ae(t,e)():r>0?Se(t,r)():t(),Nr=(t,e)=>{let r=j.get(t);r.delete(e),r.size===0&&j.delete(t)},Cr=async(t,e,r)=>{try{if(!await it(t))return;(h(r)?await r.call(t,e):!0)!==!1&&t.__xhr_handler&&!t.__xhr_request_in_progress&&await t.__xhr_handler.call(t,e)}catch(o){c("Error in event handler:",o,t)}},Mr=t=>t.type?.startsWith("key"),Or=(t,e)=>e.every(r=>$t.includes(r)?t[`${r}Key`]:t.keyCode===Ot[r]),$r=(t,e,r={})=>{let o=new IntersectionObserver(n=>{n.forEach(i=>{if(i.isIntersecting)try{e(i,t),r.once&&o.unobserve(t),r.disconnect&&o.disconnect()}catch(s){c("Error in IntersectionObserver callback:",s)}})},r);return o.observe(t),()=>o.disconnect()},Ce=(t,e,r,o={})=>y(document,e,n=>{t.contains(n.target)||r(n)},o);var at=(t,e,r)=>{let{rootMargin:o="0px",threshold:n=.1,once:i}=r;return $r(t,(a,l)=>{let f={type:"intersect",detail:{entry:a,element:l},target:l};m(l,"intersect",f.detail)&&e.call(l,f)},{rootMargin:o,threshold:n,once:i,disconnect:i})};u("xhr",({el:t,directive:e,manager:r})=>{let o=e.expression,n=Ie(e),i=Ne(t),s=async()=>{if(!t.__xhr_request_in_progress){t.__xhr_request_in_progress=!0;try{await Te().handleRequest(t,n,o)}catch(l){c("XHR request failed:",l)}finally{t.__xhr_request_in_progress=!1}}},a=()=>{};if(r.hasDirective("on"))t.__xhr_handler=s;else{let l=st(t,s,{preventDefault:!0,stopPropagation:!0});a=y(t,i,l)}return()=>{a(),delete t.__xhr_handler,delete t.__xhr_request_in_progress}});function Me(t,e){if(!(t instanceof Map))return e;for(let[,r]of t){let o=b(r)?r.value:r;if(_(o)){let n=ct(o);if(n!==null)return n}}return e}function ct(t){let e=/^(\d+)(ms|s)$/;if(_(t)&&e.test(t)){let[,r,o]=t.match(e);return o==="ms"?Number(r):Number(r)*1e3}return null}u("on",({el:t,directive:e})=>{let{modifiers:r,expression:o,value:n}=e,i=n?n.split(",").map(a=>a.trim()):[];if(i.length===0){c("No event specified for a-on directive in element: ",t);return}let s={preventDefault:r?.has("prevent")||!1,stopPropagation:r?.has("stop")||!1,once:r?.has("once")||!1,capture:r?.has("capture")||!1,passive:r?.has("passive")||!1,self:r?.has("self")||!1,window:r?.has("window")||!1,document:r?.has("document")||!1,outside:r?.has("outside")||!1,rootMargin:r?.get("rootMargin")?.value,threshold:r?.get("threshold")?.value,delay:ct(r?.get("debounce")?.value||"0"),throttle:ct(r?.get("throttle")?.value||"0"),keyModifiers:Array.from(r?.keys()||[]).filter(a=>a in Ot||$t.includes(a))};try{let l=st(t,async d=>await x(t,o,{$event:d,$el:t}),s),f=i.map(d=>d==="intersect"?at(t,l,s):Lr(t,d,l,s));return()=>f.forEach(d=>d())}catch(a){c(`Error evaluating expression in a-on directive: ${a.message}`,t)}});function Lr(t,e,r,o){return o.window?y(window,e,r,o):o.document?y(document,e,r,o):o.outside&&e==="click"?Ce(t,e,r,o):y(t,e,r,o)}async function Rr(t,e,r,o,n,i,s){let a=document.createElement("template");a.innerHTML=t.trim();let l=a.content.firstElementChild||a.content.firstChild;if(!l)return c("Invalid template in a-for directive",s),null;let f={...n,[i.item]:e,[i.key||"key"]:r,[i.index||"index"]:r,length:o,parent:n};T(l,f),I(l);let d=p(l,"if");if(d&&!await x(l,d.expression,f))return null;let E=p(l,"show");return E&&(l.style.display=await x(l,E.expression,f)?"":"none"),C(l).forEach(A=>{re(A)&&J(A)}),l}async function Oe(t,e,r,o,n){if(e==null){w("Items is null or undefined in appendItems");return}let i=Array.isArray(e),s=i?e:b(e)?Object.entries(e):[];for(let a=0;a<s.length;a++){let[l,f]=i?[a,s[a]]:s[a],d=await Rr(o,f,l,s.length,r,n,t);d&&t.appendChild(d)}}u("for",({el:t,directive:e})=>{let r=de(e.expression);if(!r){c("Invalid expression for a-for directive",t);return}let o=t.innerHTML;t.innerHTML="";let n=()=>{v(async()=>{let s=g(t.parentElement);if(!s){w("No parent data found for a-for directive",t);return}let a=await x(t.parentElement,r.items,s);if(O(a)){w(`${r.items} is not defined`,t);return}t.innerHTML="",await Oe(t,a,s,o,r)})};n();let i=F((s,a)=>{s===t.parentElement&&a.startsWith(D)&&n()});return()=>i()});u("if",({el:t,directive:e})=>{let{expression:r}=e,o=document.createComment(`if: ${r}`),n=!1,i=v(()=>{let s=x(t,r);s&&!n&&t.parentNode?(t.parentNode.insertBefore(o,t.nextSibling),n=!0):!s&&n&&t.parentNode&&(t.parentNode.replaceChild(o,t),n=!1)});return t.parentNode&&t.parentNode.insertBefore(o,t.nextSibling),()=>{i(),o.parentNode&&o.remove(),n&&t.parentNode&&t.remove()}});u("show",({el:t,directive:e})=>{let{expression:r,modifiers:o}=e,n=async()=>{try{let s=await x(t,r);O(s)||Fr(t,s,o.has("important"))}catch(s){console.error("Error updating visibility for element:",t,s)}};return n(),F((s,a)=>{s.contains(t)&&a.startsWith(D)&&n()})});function Fr(t,e,r){p(t,"transition")?m(t,"asor:transition",{visible:e}):v(()=>{t.style.display=e?"":"none",r&&t.style.setProperty("display",t.style.display,"important")})}var N=class{constructor(e={}){this.options={...N.DEFAULT_OPTIONS,...e},this.bar=null,this.visible=!1,this.timeout=null,this.value=0,this.trickleInterval=null}show(){this.visible||(this.visible=!0,this.value=0,clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.createBar(),this.trickle()},this.options.delay))}hide(){!this.visible||(clearTimeout(this.timeout),clearInterval(this.trickleInterval),this.visible=!1,this.setValue(100),this.timeout=setTimeout(()=>{this.removeBar(),this.value=0},this.options.duration))}setValue(e){this.value=Math.min(100,Math.max(0,e)),this.bar&&(this.bar.style.width=`${this.value}%`,this.updateARIA())}trickle(){clearInterval(this.trickleInterval),this.trickleInterval=setInterval(()=>{let e=100-this.value,r=.02*Math.pow(1-Math.sqrt(e),2);this.setValue(this.value+r)},100)}createBar(){this.bar||(this.bar=document.createElement("div"),this.bar.className=this.options.className,this.bar.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: ${this.options.height};
            background-color: ${this.options.color};
            z-index: ${this.options.zIndex};
            transition: width ${this.options.duration}ms ease-out;
            box-shadow: 0 0 10px ${this.options.color}, 0 0 5px ${this.options.color};
            pointer-events: none;
        `,this.setAccessibility(),document.body.appendChild(this.bar))}removeBar(){this.bar&&this.bar.parentNode&&(this.bar.parentNode.removeChild(this.bar),this.bar=null)}setAccessibility(){!this.bar||(this.bar.setAttribute("role","progressbar"),this.bar.setAttribute("aria-valuemin","0"),this.bar.setAttribute("aria-valuemax","100"),this.updateARIA())}updateARIA(){!this.bar||(this.bar.setAttribute("aria-valuenow",Math.round(this.value)),this.bar.setAttribute("aria-label",`Progress: ${Math.round(this.value)}%`))}static injectStyles(){let e=document.createElement("style");e.textContent=`
            @keyframes asor-progress-bar-pulse {
                0% { box-shadow: 0 0 10px ${N.DEFAULT_OPTIONS.color}, 0 0 5px ${N.DEFAULT_OPTIONS.color}; }
                50% { box-shadow: 0 0 20px ${N.DEFAULT_OPTIONS.color}, 0 0 10px ${N.DEFAULT_OPTIONS.color}; }
                100% { box-shadow: 0 0 10px ${N.DEFAULT_OPTIONS.color}, 0 0 5px ${N.DEFAULT_OPTIONS.color}; }
            }
            .${N.DEFAULT_OPTIONS.className} {
                animation: asor-progress-bar-pulse 1.5s infinite ease-in-out;
            }
        `;let r=jt("csp-nonce");r&&(e.nonce=r),document.head.appendChild(e)}},H=N;Ht(H,"DEFAULT_OPTIONS",{color:"#29d",height:"3px",duration:300,delay:300,zIndex:14062024,className:"asor-progress-bar"});H.injectStyles();var $e=10,Le=50,lt=class{constructor(){this.progressBar=new H({delay:250}),this.cache=new Map,this.scrollPositions=new Map,this.currentRequest=null,this.executedScripts=new Set,window.addEventListener("popstate",this.handlePopState.bind(this))}handleNavigate=async e=>{if(this.shouldInterceptClick(e))return;e.preventDefault();let r=e.currentTarget.href||e.currentTarget.getAttribute("href");if(!r){c("No URL found for navigation.");return}await this.navigate(r)};shouldInterceptClick=e=>e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;handlePopState=async e=>{let r=e.state?.asor;if(r?._html){let o=this.fromSessionStorage(r._html);await this.renderView(o),this.rehydrateBindings()}else await this.navigate(window.location.href,{pushState:!1})};rehydrateBindings(){document.querySelectorAll("*").forEach(e=>{let r=Array.from(e.attributes).filter(o=>o.name.startsWith(D));r.length>0&&r.forEach(o=>{try{let n=JSON.parse(sessionStorage.getItem(o.name)||"{}");T(e,n),I(e)}catch(n){c("Error rehydrating bindings",n)}})})}async navigate(e,r={pushState:!0}){try{this.clearExecutedScripts(),this.progressBar.show(),this.saveScrollPosition(),m(document,"asor:navigating",{url:e});let o=await this.loadView(e);if(!o)return;let n=new URL(e,document.baseURI);await(r.pushState?this.pushState(n,o.html):this.replaceState(n,o.html)),await this.renderView(o.html),this.restoreScrollPosition(e),this.animateTransition(),m(document,"asor:navigated",{url:n.href})}catch(o){c("Navigation error:",o)}finally{this.progressBar.hide()}}async loadView(e){let r=e.toString();if(this.cache.has(r))return this.cache.get(r);this.currentRequest&&this.currentRequest.abort();let o=new AbortController;this.currentRequest=o;try{let n=new URL(e,window.location.origin).href,i=await fetch(n,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},signal:o.signal});i.ok||c(`Navigation to ${e} failed with status ${i.status}`);let a={html:await i.text()};return this.cache.set(r,a),this.trimCache(),a}catch(n){throw n.name==="AbortError"?w(`Request to ${e} aborted`):c(`Error during navigation to ${e}:`,n),n}finally{this.currentRequest===o&&(this.currentRequest=null)}}trimCache(){this.cache.size>Le&&Array.from(this.cache.keys()).slice(0,this.cache.size-Le).forEach(r=>this.cache.delete(r))}saveScrollPosition(){this.scrollPositions.set(window.location.href,{x:window.scrollX,y:window.scrollY})}restoreScrollPosition(e){requestAnimationFrame(()=>{let r=this.scrollPositions.get(e)||{x:0,y:0};window.scrollTo(r.x,r.y)})}animateTransition(){document.body.style.opacity="0",requestAnimationFrame(()=>{document.body.style.transition="opacity 0.3s",document.body.style.opacity="1",setTimeout(()=>{document.body.style.transition=""},300)})}async pushState(e,r){await this.updateState("pushState",e,r)}async replaceState(e,r){await this.updateState("replaceState",e,r)}async updateState(e,r,o){this.trimHistory();let n=Date.now();await this.storeInSession(n,o);let i={asor:{_html:n}};try{history[e](i,document.title,r)}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&c(`Cannot use asor:navigate with a link to a different root domain: ${r}`)}}trimHistory(){let e=history.length;e>$e&&history.go($e-e)}fromSessionStorage(e){try{return JSON.parse(sessionStorage.getItem(`asor:${e}`))}catch(r){return c("Error retrieving from session storage:",r),null}}async storeInSession(e,r){try{sessionStorage.setItem(`asor:${e}`,JSON.stringify(r))}catch(o){o.name==="QuotaExceededError"?(this.clearOldestSessionItem(),await this.storeInSession(e,r)):c("Error storing in session storage:",o)}}clearOldestSessionItem(){let e=Object.keys(sessionStorage).filter(r=>r.startsWith("asor:")).sort();e.length>0&&sessionStorage.removeItem(e[0])}async renderView(e){let o=new DOMParser().parseFromString(e,"text/html");document.title=o.title,await this.updateHead(o.head),await this.updateBody(o.body),this.executeScripts(document.body),this.executeScripts(document.head),window.Asor&&h(window.Asor.start)&&window.Asor.start(!0)}async updateHead(e){let r=document.head;Array.from(r.children).forEach(o=>{o.hasAttribute("data-persist")||o.remove()}),Array.from(e.children).forEach(o=>{o.hasAttribute("data-persist")||r.appendChild(o.cloneNode(!0))})}async updateBody(e){document.body.innerHTML=e.innerHTML}executeScripts(e){e.querySelectorAll("script").forEach(r=>{let o=r.src,n=r.textContent;if(this.executedScripts.has(o)||this.executedScripts.has(n))return;let i=document.createElement("script");Array.from(r.attributes).forEach(s=>i.setAttribute(s.name,s.value)),o?(i.src=o,this.executedScripts.add(o)):(i.textContent=`(function() { ${n} })();`,this.executedScripts.add(n)),r.parentNode.replaceChild(i,r)})}clearExecutedScripts(){this.executedScripts.clear()}async preloadView(e){if(!this.cache.has(e))try{let r=new URL(e,window.location.origin).href,o=await fetch(r,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},signal:AbortSignal.timeout(1e4)});o.ok||c(`Preload of ${e} failed with status ${o.status}`);let n=await o.text();this.cache.set(e,{html:n}),this.trimCache()}catch(r){c("Preload error:",r)}}};var z;u("navigate",({el:t,directive:e})=>{if(z||(z=new lt),t.hasNavigateListener)return;t.hasNavigateListener=!0;let r=!1;y(t,"click",async n=>{if(!r){r=!0,n.type==="click"&&n.preventDefault();try{await it(t)&&await z.handleNavigate(n)}catch(i){c("Navigation error:",i)}finally{r=!1}}}),e.hasModifier("lazy")?Pr(t,e):e.hasModifier("hover")&&Hr(t)});function Pr(t,e){return at(t,()=>{let o=t.getAttribute("href");o&&z.preloadView(o)},{rootMargin:e.getModifierValue("margin")||"90px",once:e.hasModifier("once")})}function Hr(t){y(t,"mouseenter",()=>{let r=t.getAttribute("href");r&&z.preloadView(r)})}u("transition",({el:t,directive:e})=>{let r=Ur(e),o=!1,n=null,i=l=>{if(o||l===n)return;o=!0,n=l;let f=l?"enter":"leave",d=l?r.enterDuration:r.leaveDuration;v(()=>{r.useClasses?qr(t,f,d):kr(t,l,r)}),setTimeout(()=>{o=!1,l||(t.style.display="none")},d)},a=y(t,"asor:transition",l=>{let f=l.detail.visible;f!==n&&(f&&(t.style.display=""),i(f))});return n=window.getComputedStyle(t).display!=="none",n||(t.style.display="none"),a});function qr(t,e,r){v(()=>{let o=p(t,`transition:${e}`)?.expression,n=p(t,`transition:${e}-start`)?.expression,i=p(t,`transition:${e}-end`)?.expression;o&&t.classList.add(o),n&&(t.classList.add(n),requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.classList.remove(n),i&&t.classList.add(i)})})),setTimeout(()=>{o&&t.classList.remove(o),i&&t.classList.remove(i)},r)})}function kr(t,e,r){v(()=>{t.style.transition="none",t.offsetWidth,t.style.opacity=e?r.initialOpacity:"1",r.scale&&(t.style.transform=`scale(${e?r.initialScale:"1"})`),t.offsetWidth,t.style.transition=`all ${e?r.enterDuration:r.leaveDuration}ms ${r.easing}`,t.style.opacity=e?"1":r.initialOpacity,r.scale&&(t.style.transform=`scale(${e?"1":r.initialScale})`),r.origin!=="center"&&(t.style.transformOrigin=r.origin)})}function Ur(t){let e={enterDuration:300,leaveDuration:300,delay:0,easing:"ease",opacity:!0,scale:!1,initialOpacity:"0",initialScale:"0.95",useClasses:!1,origin:"center"},r=new Map([["duration","enterDuration"],["enter","enterDuration"],["leave","leaveDuration"],["delay","delay"]]);return t.modifiers.forEach((o,n)=>{r.has(n)?(e[r.get(n)]=Me(new Map([[n,o]]),e[r.get(n)]),n==="duration"&&(e.leaveDuration=e.enterDuration)):["ease","ease-in","ease-out","ease-in-out","linear"].includes(n)?e.easing=n:n==="opacity"?(e.opacity=!0,e.scale=!1):n==="scale"?(e.scale=!0,e.opacity=o!=="false",o&&o!=="true"&&(e.initialScale=parseFloat(o)/100)):n==="origin"&&(e.origin=o||"center")}),(p(t.el,"transition:enter")||p(t.el,"transition:leave"))&&(e.useClasses=!0),e}function M(t,e,r,o=null){v(()=>{if(r=e.hasModifier("remove")?!r:r,e.hasModifier("class")){let n=e.expression.split(" ").filter(String);r?t.classList.add(...n):t.classList.remove(...n)}else if(e.hasModifier("attr"))r?t.setAttribute(e.expression,!0):t.removeAttribute(e.expression);else{let n=o??Xt(t,"display"),i=["inline","block","table","flex","grid","inline-flex"].find(s=>e.hasModifier(s))||"inline-block";i=e.hasModifier("remove")&&!r?n:i,t.style.display=r?i:"none"}})}u("loading",({el:t,directive:e})=>{let r={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3},o=e.getAllModifiers().reduce((E,A)=>r[A.name]||E,r.default),n,i=!1,a=(E=>e.hasModifier("delay")&&!e.hasModifier("none")?()=>{n=setTimeout(()=>{E()},o)}:E)(()=>{i||(i=!0,M(t,e,!0))}),l=()=>{clearTimeout(n),i&&(i=!1,M(t,e,!1))},f=y(document,"asor:before-send",a),d=y(document,"asor:after-request",l);return()=>{f(),d(),clearTimeout(n)}});var Lt=new Set,Rt=new Set;function Ft(){(navigator.onLine?Rt:Lt).forEach(r=>r())}window.addEventListener("online",Ft);window.addEventListener("offline",Ft);typeof navigator.onLine<"u"&&Ft();u("offline",({el:t,directive:e})=>{let r=()=>M(t,e,!0),o=()=>M(t,e,!1);return Lt.add(r),Rt.add(o),typeof navigator.onLine<"u"&&M(t,e,!navigator.onLine),()=>{Lt.delete(r),Rt.delete(o)}});var Vr=5e3;u("stream",({el:t,directive:e})=>{let r=e.expression,o=p(t,"swap")?.expression||"innerHTML",n=null,i=()=>{n=new EventSource(r),t._stream=n,n.onopen=()=>m(t,"stream:open"),n.onmessage=a=>Wr(t,a,o),n.onerror=a=>jr(t,a,i)},s=()=>{n&&(n.close(),n=null)};return i(),Z(t,()=>s)});function Wr(t,e,r){nt(t,e.data,r),m(t,"stream:message",{data:e.data})}function jr(t,e,r){m(t,"stream:error",{error:e}),r(),setTimeout(r,Vr)}var zr={on:kt,stop:wt,start:le,evaluate:x,directive:u,onDataChange:et,dispatchSelf:Vt,dispatchGlobal:Ut},Pt=zr;window.Asor=Pt;queueMicrotask(()=>Pt.start());})();
